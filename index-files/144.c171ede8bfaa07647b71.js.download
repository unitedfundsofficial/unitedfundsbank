(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{"/ELx":function(t,e,n){"use strict";(function(e,r){var i=n("uOxu").getLogger("Alerts.Price.Abstract"),o=n("pPtI").getTranslatedResolution,a=n("8woN"),s=n("Ialn"),u=e.Model.extend({constructor:function(t,n){t=this._prepareToSet(t,!0),e.Model.call(this,t,n)},_prepareToSet:function(t,e){var n,r,i;if(t)for(n in t)t.hasOwnProperty(n)&&(r=t[n],"function"==typeof this[i="_prepareToSet_"+n]&&(t[n]=this[i](r,t,e)));return t},destroy:function(){this.stopListening(),this.trigger("destroy",this)},save:function(){i.logError("[Alerts] Use disaptcher to save")},shortSymbol:function(t){return a?a.shortName(t||this.get("symbol")||""):(i.logWarn("[Alerts] can't get short symbol"),t)},resolutionReadable:function(t){return(t=t||this.get("resolution"))?o(t):""},title:function(t){var e;return e=t?this.get("symbol"):this.shortSymbol(),this.get("crossInterval")||(e=s.isRtl()?e+" "+s.forceRTLStr(" ,"+this.resolutionReadable()):e+", "+this.resolutionReadable()),e},_formatDate:function(t){return r(t||new Date).format("MMM D LTS")}});t.exports=u}).call(this,n("q1z7"),n("ldgD"))},"4pku":function(t,e,n){"use strict";(function(e){var r=n("/ELx"),i=n("C2JW").AlertExtra,o=n("OKab").FormattersSerializer,a=n("A0ZR").AlertFrequencyController,s=n("pPtI").getServerInterval,u=n("PJXJ").ensureDurationInSeconds,l=n("M3fW").getAlertConditionTokenMap,c=n("YG2F").getAlertDefaultDescription,d=["crossInterval","autoDeactivation","description","sendEmail","expired","extra","showPopup","resolution","script","scriptDeps","sendSms","sendTrueSms","sendPush","playSound","soundDuration","soundFile","symbol","noExpiration","symbolInternal","webhookUrl"],p=d.concat(["id"]),f=r.extend({constructor:function(t,n){var o={};["autoDeactivation","frequency","extra","crossInterval"].forEach(function(e){t.hasOwnProperty(e)&&(o[e]=t[e],delete t[e])}),e.isEmpty(o)||(this.__delayedInitAttrs=o),t.version=t.version||i.VERSION,r.call(this,t,n),this.frequencyController=new a(this)},initialize:function(){function t(t){e.set("crossInterval",!!t)}var e=this;this.on("change:extra",function(e,n,r){n&&(n.crossInterval.unsubscribe(t),n.crossInterval.subscribe(t),e.set("crossInterval",n.crossInterval.value()))}).on("change:crossInterval",function(t,e,n){var r=t.get("extra");e?t.set("resolution","1"):r&&r.mainSeries()&&t.set("resolution",r.mainSeries().interval)}).on("destroy",function(){TVSettings.remove(e.TVSettingsPropertiesKey(e.id))}),this.__delayedInitAttrs&&(this.set(this.__delayedInitAttrs),delete this.__delayedInitAttrs)},set:function(t,e,n){var i;return n=n||{},null==t?this:n.noPrepare?r.prototype.set.call(this,t,e,n):("object"==typeof t?(i=t,n=e):(i={})[t]=e,i=this._prepareToSet(i),r.prototype.set.call(this,i,n))},_prepareToSet_soundDuration:function(t){t=parseInt(t);return isNaN(t)&&(t=0),u(t)},_prepareToSet_expired:function(t){return t instanceof Date?t:new Date(1e3*t)},_prepareToSet_extra:function(t){var e=this.get("extra"),n=e&&t,r=t&&!(t instanceof i);return n?t=e.update(t):r?(t=new i(t),
this.set("scriptDeps",t.getDependencies())):t||(t=null),t},_prepareToSet_symbolInternal:function(t){if(t)return t},isPrice:function(){return null!==(this.get("extra")?this.get("extra").price():null)},isDrawing:function(){return!(!this.get("extra")||!this.get("extra").drawing())},isMoving:function(){return this.get("extra")&&"moving"===(this.get("extra").conditionData()||{}).type},isOHLC:function(){var t=this.get("extra");if(t&&t.alertSeries())return"MainSeries"===t.alertSeries().type},isRangeBasedStyle:function(){var t=this.get("extra"),e=t&&t.getMainSeries();return!(!e||"MainSeries"!==e.type()||!e.isRangeBasedStyle())},isComplexSymbol:function(){var t=this.get("symbolInternal");return t!==this.get("symbol")&&t},isPine:function(){var t=this.get("extra"),e=t&&t.alertSeries();return e&&e.alerts},expiredUnix:function(){return Math.round(this.get("expired").getTime()/1e3)},defaultDescription:function(){return c(l(this))},setDefaultDescription:function(){this.set("description",this.defaultDescription())},state:function(){return this.toJSON()},toJSON:function(){var t,e,n={};for(t in this.attributes)this.attributes.hasOwnProperty(t)&&(e=this.attributes[t],n[t]=e&&"function"==typeof e.toJSON?e.toJSON():e);return n.expired&&(n.expired=this.expiredUnix()),n},prepareToSend:function(){var t,e,n,r=this.toJSON(),i={};for(n=p.length-1;n>=0;n--)void 0!==(e=r[t=p[n]])&&(i[t]=e),"resolution"===t&&(i[t]=s(e));return i.playSound||(delete i.soundDuration,delete i.soundFile),i.extra&&(i.extra=JSON.stringify(i.extra)),i},getLocalClone:function(){var t=this.toJSON(),e=d.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{});return new f(e)},saveState:function(){this._oldState=this.state()},restoreState:function(t,e){!(t=t||this._oldState||{}).extra||t.extra instanceof i||(t.extra=new i(t.extra),t.scriptDeps=t.extra.getDependencies()),this.set(t),e||delete this._oldState},getSavedState:function(){var t;return this._oldState&&(t=$.extend({},this._oldState)).extra&&(t.extra=new i(t.extra),t.scriptDeps=t.extra.getDependencies()),t},createTimeFormatted:function(){var t=this.get("createTime");return t?this._formatDate(1e3*t):null},TVSettingsPropertiesKey:function(){return t=this.id,"chartproperties.alertsProperties."+(t=parseInt(t));var t},getFormatter:function(){var t,e=this.get("extra");return e&&(t=e.alertSeries()).formatter?o.deserialize(t.formatter):null}});t.exports.Alert=f}).call(this,n("F/us"))},A0ZR:function(t,e,n){"use strict";var r,i,o,a,s;n.r(e),n.d(e,"AlertFrequencyController",function(){return s}),r=n("n5al"),i=n("uOxu"),o=n("ogJP"),a=Object(i.getLogger)("Alerts.Price.FrequencyController"),s=function(){function t(t){var e=this;this._alert=t,t.on("change:autoDeactivation",function(t,n){var r,i=t.get("frequency"),o=e._isFireRateValid({frequency:i,autoDeactivation:n});o||((r=e._getValidFireRate({autoDeactivation:n}))?t.set("frequency",r.frequency):(a.logError("Set invalid autoDeactivation: "+n+". Available: "+JSON.stringify(e.getAvailable())),e._setAnyValidFireRate()))}),t.on("change:frequency",function(t,n){var r,i
;e._putFrequencyToExtra(),r=t.get("autoDeactivation"),e._isFireRateValid({frequency:n,autoDeactivation:r})||((i=e._getValidFireRate({frequency:n}))?t.set("autoDeactivation",i.autoDeactivation):(a.logError("Set invalid frequency: "+n+". Available: "+JSON.stringify(e.getAvailable())),e._setAnyValidFireRate()))})}return t.prototype.getAvailable=function(){var t=this,e=this._alert.get("extra"),n=function(){var t;return(null===(t=null===e||void 0===e?void 0:e.alertSeries())||void 0===t?void 0:t.isTVScriptStrategy)||!1},i=function(){var n;return Boolean(t._alert.isDrawing()&&"LineToolVertLine"===(null===(n=null===e||void 0===e?void 0:e.drawing())||void 0===n?void 0:n.type))},a=function(){return t._alert.get("crossInterval")},s=function(){var t,n;return[null===(t=null===e||void 0===e?void 0:e.alertSeries())||void 0===t?void 0:t.style,null===(n=null===e||void 0===e?void 0:e.mainSeries())||void 0===n?void 0:n.style].filter(o.isInteger).some(r.hasProjection)};return n()?[{autoDeactivation:!1,frequency:"60"}]:i()?[{autoDeactivation:!0,frequency:"on_first_fire"}]:a()?[{autoDeactivation:!0,frequency:"on_first_fire"},{autoDeactivation:!1,frequency:"on_first_fire"}]:s()?[{autoDeactivation:!0,frequency:"on_bar_close"},{autoDeactivation:!1,frequency:"on_bar_close"}]:[{autoDeactivation:!0,frequency:"once"},{autoDeactivation:!1,frequency:"on_first_fire"},{autoDeactivation:!1,frequency:"on_bar_close"},{autoDeactivation:!1,frequency:"60"}]},t.prototype.switchFrequencies=function(){var t,e,n,r,i=this._alert,o=i.get("frequency"),a=i.get("autoDeactivation");!0===a&&(t=this._getValidFireRate({autoDeactivation:!0}))?i.set({autoDeactivation:t.autoDeactivation,frequency:t.frequency}):!1===a&&"on_first_fire"===o&&(e="60",n=this._getValidFireRate({frequency:e}))?i.set({autoDeactivation:n.autoDeactivation,frequency:e}):!1===a&&(r=this._getValidFireRate({autoDeactivation:!1}))?i.set({autoDeactivation:r.autoDeactivation,frequency:r.frequency}):this._isFireRateValid({frequency:o,autoDeactivation:a})||this._setAnyValidFireRate()},t.prototype._putFrequencyToExtra=function(){var t=this._alert.get("extra");t&&t.frequency(this._alert.get("frequency"))},t.prototype._isFireRateValid=function(t){return this.getAvailable().some(function(e){return e.frequency===t.frequency&&e.autoDeactivation===t.autoDeactivation})},t.prototype._getValidFireRate=function(t){var e=Object.entries(t)[0],n=e[0],r=e[1],i=this.getAvailable().find(function(t){return t[n]===r});return void 0===i?null:i},t.prototype._setAnyValidFireRate=function(){var t=this.getAvailable()[0];this._alert.set({frequency:t.frequency,autoDeactivation:t.autoDeactivation}),this._putFrequencyToExtra()},t}()},C2JW:function(t,e,n){"use strict";(function(t){function r(t){this._data={},this.crossInterval=new p,this.update(t)}var i,o,a,s,u,l,c,d,p,f;Object.defineProperty(e,"__esModule",{value:!0}),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.AlertExtra=r,
o=n("uOxu").getLogger("Alerts.Extra"),a=n("dOnf").deepCopy,s=n("23IT").isAlertConditionPlot,u=n("CLNU").cleanButAmpersand,l=n("dTSQ").regExpEscape,TradingView="object"===(void 0===t?"undefined":i(t))?t.TradingView:TradingView||{},"function"!=typeof TradingView.merge&&(TradingView.merge=function(t,e){for(var n in e)"object"===i(e[n])&&t.hasOwnProperty(n)?TradingView.merge(t[n],e[n]):t[n]=e[n];return t}),c=n("dn9U"),d=n("EQCO").alertBandFactory,p=n("hY0g"),r.VERSION=21,r.prototype.update=function(t){return t=this._prepareExtraObject(t),r._isValidExtra(t)?(this._data=t||{},this._updateCrossInterval()):o.logError("Wrong alert extra"),this},r.prototype.addDatasourse=function(t,e){this._addDatasourseToJson(this._data,t,e)},r.prototype._addDatasourseToJson=function(t,e,n){(n||t.condition[e])&&(t.condition[e]={id:n.id,plotIndex:n.plotIndex},t.statesForAlert[n.id]=n,n.plotIndex&&delete t.statesForAlert[n.id].plotIndex)},r.prototype.getDependencies=function(){var t,e,n={};for(t in this._data.statesForAlert)this._data.statesForAlert.hasOwnProperty(t)&&("Study"===(e=this._data.statesForAlert[t]).type||/^study_\w+/.test(e.type))&&null!=e.studyDependencies&&e.studyDependencies.forEach(function(t){n[t.id]=t});return Object.keys(n).map(function(t){return n[t]}).map(function(t){return t.study=t.study.replace(/(\d)$/,"$1!"),t})},r.prototype.updateDataSourseStates=function(){var t=this,e=this.getAvailableBands().map(function(e){return t._data.condition[e]}).filter(function(t){return!!t}).map(function(t){return t.id});Object.keys(t._data.statesForAlert).filter(function(t){return e.indexOf(t)<0}).forEach(function(e){delete t._data.statesForAlert[e]})},r.prototype._prepareExtraObject=function(t){var e;return"string"==typeof t?t=JSON.parse(t):t instanceof r&&(t=t.toJSON()),r._isValidExtra(t)?t:(function(e){var n=c.defaults(t.conditionId||"cross");this._addDatasourseToJson(e,"mainSeries",t.mainSeries),this._addDatasourseToJson(e,"alertSeries",t.alertSeries),"moving"===n.type?(e.condition.movValue=Number(t.value),e.condition.movPeriod=Number(t.period)):"comparison"===n.type&&n.isChannel?(this._addDatasourseToJson(e,"upperBand",t.upperBand),this._addDatasourseToJson(e,"lowerBand",t.lowerBand)):"comparison"!==n.type||n.isChannel?["pine_script","pine_alertcondition_plot","strategy"].includes(n.type)||o.logError("[Alerts] Unknown condition type: "+n.type):this._addDatasourseToJson(e,"band",t.band)}.bind(this)(e={version:r.VERSION,condition:{id:t.conditionId,fireInfo:t.fireInfo},statesForAlert:{}}),e)},r.prototype.isValid=function(){return r._isValidExtra(this._data)},r._isValidExtra=function(t){var e,n,o=!!("object"===(void 0===t?"undefined":i(t))&&null!==t&&t.version>=r.VERSION&&t.statesForAlert&&t.condition&&t.condition.id&&t.condition.alertSeries&&t.condition.fireInfo&&(t.condition.fireInfo.type||t.condition.fireInfo.frequency));return o?(e=Object.keys(t.statesForAlert),o=(o=o&&e.indexOf(t.condition.alertSeries.id)>=0)&&(!t.condition.mainSeries||e.indexOf(t.condition.mainSeries.id)>=0),
(n=c.defaults(t.condition.id))&&"comparison"===n.type&&!n.isChannel?o=(o=o&&!!t.condition.band)&&e.indexOf(t.condition.band.id)>=0:n&&"comparison"===n.type&&n.isChannel?o=(o=(o=(o=o&&!!t.condition.upperBand)&&!!t.condition.lowerBand)&&e.indexOf(t.condition.upperBand.id)>=0)&&e.indexOf(t.condition.lowerBand.id)>=0:n&&"moving"===n.type&&(o=(o=o&&!!t.condition.movPeriod)&&!!t.condition.movValue),o):o},r.prototype._prepareToJSON=function(){var t,e,n=this.bandsObject(),r=Object.keys(n);for(t=0;t<r.length;t++)e=n[r[t]],TradingView.isExistent(e.value)&&(e.value=String(e.value))},r.prototype.toJSON=function(){return this._prepareToJSON(),a(this._data)},r.prototype.toGenAlertJSON=function(t){var e,n=this._patchDescription(t);return this._patchStrategyInputs(n),(e=this.toJSON()).message=n,e},r.prototype.state=r.prototype.toJSON,r.prototype.conditionData=function(){var t=this._data&&this._data.condition&&this._data.condition.id;if(t)return c.getData(t,this)},r.prototype.bandsObject=function(t){return this._data.statesForAlert},r.prototype.bandsArray=function(t){var e=this;return t=t||"object",this.getAvailableBands().map(function(n){return e._getSomeBand(n,t)}).filter(function(t){return!!t})},r.prototype.price=function(t){function e(t,e){var n=o._getSomeBand(t,"object"),r=n&&"Value"===n.type&&void 0!==e;r&&(n.value=parseFloat(e),o[t](n))}function n(t){var e=o._getSomeBand(t,"object");return e&&!isNaN(e.value)&&void 0!==e.value&&null!==e.value?parseFloat(e.value):null}var r,i,o=this,a=o.conditionData();return a&&"comparison"===a.type?(void 0!==t&&(o.conditionData().isChannel?(e("upperBand",t.upperBand||t.upper),e("lowerBand",t.lowerBand||t.lower)):e("band",t.band||t),this._updateCrossInterval()),o.conditionData().isChannel?(r=n("upperBand"),i=n("lowerBand"),null===r||null===i?null:{upper:r,lower:i}):n("band")):null},r.prototype.conditionId=function(t,e){var n,r;return void 0!==t&&(this._data.condition.id=t,(n=c.get(this)[t])&&"pine_alertcondition_plot"===n.type&&((r=this.alertSeries()).plotIndex=n.plotIndex,this.alertSeries(r)),e||this._updateCrossInterval()),this._data.condition.id},f=20,r.prototype._patchDescription=function(t){var e,n,r;try{if(e=["alertcondition","ohlc_open","ohlc_high","ohlc_low","ohlc_close","ohlc_colorer"],(n=this.getAlertSeries().getPlots())&&n.length>0)for(n.filter(function(t){return!e.includes(t.type)}).forEach(function(e,n){var r=new RegExp('{{plot\\("'+l(u(e.title,!0))+'"\\)}}',"gm");t=t.replace(r,"{{plot_"+n+"}}")}),r=n.length;r<=f;r++)t=t.replace("{{plot_"+r+"}}","null")}catch(t){o.logError("AlertExtra._patchDescription error: "+t)}return t},r.prototype._patchStrategyInputs=function(t){var e=this.getAlertSeries().getInputs(),n=function(t,e,n){for(var r in t)if(t[r].internalID===e){t[r].v=n;break}};n(e,"run_mode","ALERT"),n(e,"alert_message",t)},r.prototype.getAvailableConditionParams=function(t){return["movPeriod","movValue"]},r.prototype.getAvailableOptionalBands=function(t){return["band","lowerBand","upperBand"]},r.prototype.getAvailableBands=function(t){
return["band","lowerBand","upperBand","alertSeries","mainSeries"]},r.prototype.getAvailableOptionalConditions=function(t){return this.getAvailableOptionalBands().concat(this.getAvailableOptionalBands())},r.prototype.clearOptionalConditions=function(t){var e=this;this.getAvailableOptionalConditions().forEach(function(t){delete e._data.condition[t]}),this.updateDataSourseStates(),t||this._updateCrossInterval()},r.prototype.alertSeries=function(t,e){return void 0!==t&&(this.addDatasourse("alertSeries",t),this.updateDataSourseStates(),e||this._updateCrossInterval(),this.setValidConditionId()),this._getSomeBand("alertSeries","object")},r.prototype.getAlertSeries=function(t){return this._getSomeBand("alertSeries",t)},r.prototype.mainSeries=function(t,e){return void 0!==t&&(this.addDatasourse("mainSeries",t),this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("mainSeries","object")},r.prototype.getMainSeries=function(t){return this._getSomeBand("mainSeries",t)},r.prototype._getSomeBand=function(t,e){var n,r=e||"model",i=this._data.condition[t];if(i)return n=TradingView.merge(this._data.statesForAlert[i.id],i),"object"===r?TradingView.merge({},n):d.create(n)},r.prototype.upperBand=function(t,e){return void 0!==t&&(this.addDatasourse("upperBand",t),delete this._data.condition.band,this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("upperBand","object")},r.prototype.getUpperBand=function(t){return this._getSomeBand("upperBand",t)},r.prototype.lowerBand=function(t,e){return void 0!==t&&(this.addDatasourse("lowerBand",t),delete this._data.condition.band,this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("lowerBand","object")},r.prototype.getLowerBand=function(t){return this._getSomeBand("lowerBand",t)},r.prototype.band=function(t,e){return void 0!==t&&(this.addDatasourse("band",t),delete this._data.condition.upperBand,delete this._data.condition.lowerBand,this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("band","object")},r.prototype.getBand=function(t){return this._getSomeBand("band",t)},r.prototype.value=function(t,e){return void 0!==t&&(this._data.condition.movValue=Number(t),e||this._updateCrossInterval()),this._data.condition.movValue},r.prototype.movingValue=r.prototype.value,r.prototype.period=function(t,e){return void 0!==t&&(this._data.condition.movPeriod=Number(t),e||this._updateCrossInterval()),this._data.condition.movPeriod},r.prototype.movingPeriod=r.prototype.period,r.prototype._updateCrossInterval=function(){var t=this.getAlertSeries(),e=null!==this.price()&&t&&"MainSeries"===t.type()&&!t.isRangeBasedStyle()&&!t.isSpread();this.crossInterval.setValue(e)},r.prototype.frequency=function(t){return-1!==["once","on_first_fire","on_bar_close","60"].indexOf(t)&&(this._data.condition.fireInfo.frequency=t),this._data.condition.fireInfo.frequency},r.prototype.hasAlertCondition=function(){var t=this.alertSeries();return t.plots&&t.plots.some(s)||t.alerts&&t.alerts.conditions},
r.prototype.prepareAlertConditions=function(){var t,e,n,r=this.alertSeries(),i={};if(!r)return i;if(r.isTVScriptStrategy)return{strategy:{title:null,type:"strategy"}};if(r.plots)for(t=0;t<r.plots.length;t++)e=r.plots[t],s(e)&&(i["alertplot_"+t]={title:e.title,message:e.text,type:"pine_alertcondition_plot",plotIndex:t});if(r.alerts&&r.alerts.conditions)for(n in r.alerts.conditions)i[n]=r.alerts.conditions[n],i[n].type="pine_script";return i},r.prototype.drawing=function(t){var e,n,r,i,a,s,u,l,c=this;for(t&&t.canHasAlert()&&(n=(e=t.stateForAlert()).plots,r=!!c.conditionData().isChannel,(1===n.length?!r:r)&&"comparison"===c.conditionData().type?1===n.length?(i={},(i=TradingView.merge(i,e)).plotIndex=0,c.band(i)):(a={},s={},(a=TradingView.merge(a,e)).plotIndex=0,c.upperBand(a),(s=TradingView.merge(s,e)).plotIndex=1,c.lowerBand(s)):o.logError("[Alerts] Can't set drawing to alert with current condition")),u=this.bandsArray(),l=0;l<u.length;l++)if(/^LineTool.*/i.test(u[l].type))return u[l];return null},r.prototype.getStrategy=function(t){var e,n=this.bandsArray();for(e=0;e<n.length;e++)if(n[e].isTVScriptStrategy)return n[e];return null},r.prototype.setValidConditionId=function(){var t=this.conditionId(),e=c.get(this),n=e[t];n||this.conditionId(Object.keys(e)[0])},r.prototype.verticalLine=function(){var t=this.drawing();return t&&1===t.plots.length&&t.plots[0].offset1&&t.plots[0].offset1===t.plots[0].offset2?t:null},TradingView.AlertExtra=r}).call(this,n("yLpj"))},IWHC:function(t,e,n){"use strict";var r;n.r(e),n.d(e,"AlertCategory",function(){return r}),function(t){t.Price="price",t.Screener="screener"}(r||(r={}))},PJXJ:function(t,e,n){"use strict";function r(t){return void 0===t&&(t=0),t<1e3?t:t/1e3}n.r(e),n.d(e,"ensureDurationInSeconds",function(){return r})},dOnf:function(t,e,n){"use strict";function r(t){var e,n,i,o;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if(Array.isArray(t))for(e=[],n=0,i=t.length;n<i;n++)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=r(t[n]));else for(o in e={},t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=r(t[o]));return e}n.r(e),n.d(e,"deepCopy",function(){return r})},dn9U:function(t,e,n){"use strict";var r=function(){function t(t,e){return e.id||(e.id=t),e}function e(e){var n,r,o,a,s,u,l,c={},d=e&&e.getStrategy();for(d?r=e.prepareAlertConditions():(o=e&&e.drawing(),r=!e||e.getAlertSeries().hasUsualPlots()?i:{},o?u="LineToolVertLine"===o.type?function(t){return"cross"===t.id}:1===o.plots.length?function(t){return!t.isChannel}:2===o.plots.length?function(t){return!!t.isChannel}:function(t){return"comparsion"===t.type}:e&&e.hasAlertCondition()&&(r=$.extend(!0,{},r,e.prepareAlertConditions()))),n=Object.keys(r),l=0;l<n.length;l++)t(s=n[l],a=r[s]),u&&!u(a)||(c[s]=a);return c}var n,r,i={cross:{title:$.t("Crossing"),type:"comparison"},crosses_from_below:{title:$.t("Crossing Up"),type:"comparison"},crosses_from_above:{title:$.t("Crossing Down"),type:"comparison"},above:{title:$.t("Greater Than"),type:"comparison"},below:{title:$.t("Less Than"),type:"comparison"},
enters_channel:{title:$.t("Entering Channel"),isChannel:!0,type:"comparison"},leaves_channel:{title:$.t("Exiting Channel"),isChannel:!0,type:"comparison"},inside_channel:{title:$.t("Inside Channel"),isChannel:!0,type:"comparison"},outside_channel:{title:$.t("Outside Channel"),isChannel:!0,type:"comparison"},moving_up:{title:$.t("Moving Up"),type:"moving"},moving_down:{title:$.t("Moving Down"),type:"moving"},moving_up_percents:{title:$.t("Moving Up %"),descriptionTitle:$.t("Moving Up"),type:"moving",percents:!0},moving_down_percents:{title:$.t("Moving Down %"),descriptionTitle:$.t("Moving Down"),type:"moving",percents:!0}},o=Object.keys(i);for(r=o.length-1;r>=0;r--)t(n=o[r],i[n]);return n=null,{get:e,getData:function(t,n){var r;return(r=n?e(n)[t]:i[t])&&!r.id&&(r.id=t),r},defaults:function(t){return void 0!==t?i[t]:i},ordered:function(t,n){var r,i,o,a,s=e(t),u=["cross","crosses_from_below","crosses_from_above","above","below","enters_channel","leaves_channel","inside_channel","outside_channel","moving_up","moving_down","moving_up_percents","moving_down_percents"],l=[],c=Object.keys(s);for(n=n||{},i=c.length-1;i>=0;i--)o=s[c[i]],["pine_script","pine_alertcondition_plot","strategy"].includes(o.type)&&l.push(o);if(l.sort(function(t,e){return t.title.localeCompare(e.title)}),(a=t&&t.alertSeries&&t.alertSeries())&&a.plots&&0===a.plots.length)return l;for(n.needSeparator&&l.push({separator:!0}),i=0;i<u.length;i++)r=u[i],s.hasOwnProperty(r)&&l.push(s[r]);return l}}}();TradingView.AlertConditions=r,t.exports=r}}]);